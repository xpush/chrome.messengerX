<ion-view title="Friends">
  <ion-nav-buttons side="right">
    <button class="button" ng-click="logout()" ng-if=" !nodeWebkit ">
      <i class="icon ion-log-out"></i>
    </button>
    <div class="close-button" ng-if=" nodeWebkit ">
      <img id="close-button" ng-src="{{rootImgPath}}/button_close.png" ng-click="close()">
    </div>    
  </ion-nav-buttons>
  <ion-content class="has-header" has-bouncing="true">
    <ion-list>
      <div class="item item-input">
        <i class="icon ion-search placeholder-icon"></i>
        <input type="text" placeholder="Search" search-by-key post="postFriends" reset="resetFriends" items="friends">
      </div>
      <div class="item item-divider">
        Profile
      </div>
      <ion-item class="item item-avatar" ng-click="gotoAccount()">
      <img ng-src="{{loginUser.image}}" />
        <h2>{{loginUser.userName}}</h2>
        <p>{{loginUser.message}}</p>
      </ion-item>
      <div class="item item-divider">Friends({{friendCount}})
        <!--
        <button class="ion-refresh" ng-click="syncFriends()">
        </button>
        -->
      </div>
    	<ion-item ng-repeat="friend in friends" class="item item-avatar" ng-click='gotoChat("{{friend.user_id}}")' >
        <img ng-src="{{friend.image}}" />
        <h2>{{friend.user_name}}</h2>
        <p>{{friend.message}}</p>
        <ion-option-button class="button-assertive" ng-click='removeFriend("{{friend.user_id}}", $index)'>
          <B>Remove</B>
        </ion-option-button>
      </ion-item>
    </ion-list>
  </ion-content>
  <button class="button button-yellow icon ion-person-add button-add" ng-click="openUserModal()"></button>
</ion-view>
